# r53ddnslmd
---
## できること
* EC2インスタンスが起動したらRoute53にAレコードを登録しに行く
  * Nameタグがあればソレを使い、無ければインスタンスIDを使う
* EC2インスタンスが削除されたらRoute53からAレコードを消しに行く
  * 削除されたインスタンスのPrivateIPとマッチするAレコードを消す
  * S3上にインスタンス情報をキャッシュしていて、ソレを参照している

## 事前準備
* CloudWatch Eventを利用しているので、EC2インスタンスの状態変更通知をLambdaに流すように設定する
* S3にひとつバケットを作る
  * EC2インスタンスのTerminatedイベントを受け取った時にはすでにPrivateIPが死んでいるので、S3にキャッシュしている

## できていないこと・確認していないこと
* プライベートIPを変更した時やタグの変更など、EC2インスタンスの状態変更イベントに該当しない変更作業時のS3キャッシュ更新
* インスタンスIDからホスト名一覧を取得できるようになっているが、利用していない
